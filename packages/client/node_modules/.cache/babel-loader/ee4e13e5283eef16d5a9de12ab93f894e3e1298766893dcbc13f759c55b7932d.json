{"ast":null,"code":"var _jsxFileName = \"/home/ubuntu/Downloads/spreadsheet-app/src/Spreadsheet/data.js\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst dummyData = {\n  headers: [\"item\", \"jan-2023\", \"feb-2023\", \"mar-2023\", \"total\"],\n  data: {\n    expense: {\n      item: \"expense\",\n      \"jan-2023\": 5,\n      \"feb-2023\": 21,\n      \"mar-2023\": 35,\n      \"total\": \"=(((B10)+(B11))+(B12))+(B13)\"\n    },\n    loss: {\n      item: \"loss\",\n      \"jan-2023\": 50,\n      \"feb-2023\": 20,\n      \"mar-2023\": 47,\n      \"total\": \"=(((B10)+(B11))+(B12))+(B13)\"\n    },\n    salary: {\n      item: \"salary\",\n      \"jan-2023\": 511,\n      \"feb-2023\": 23,\n      \"mar-2023\": 49,\n      \"total\": \"=(((B10)+(B11))+(B12))+(B13)\"\n    },\n    income: {\n      item: \"income\",\n      \"jan-2023\": 59,\n      \"feb-2023\": 25,\n      \"mar-2023\": 45,\n      \"total\": \"=(((B10)+(B11))+(B12))+(B13)\"\n    },\n    fixedDeposit: {\n      item: \"fixedDeposit\",\n      \"jan-2023\": 59,\n      \"feb-2023\": 25,\n      \"mar-2023\": 45,\n      \"total\": \"=(((B10)+(B11))+(B12))+(B13)\"\n    }\n  },\n  root: {\n    expense: {\n      loss: {}\n    },\n    salary: {\n      income: {\n        fixedDeposit: {\n          expense: {\n            loss: {}\n          }\n        }\n      }\n    }\n  }\n};\nconst computeCell = (row, column, rawRows, computedRows) => {\n  var _eval;\n  computedRows[row] = {\n    ...computedRows[row],\n    [column]: (_eval = eval(rawRows[row][column].replace(/'(.+?)'&'(.+?)'/g, (_, r, c) => {\n      var _computedRows$r$c, _computedRows$r;\n      r = Object.keys(rawRows).find(row => rawRows[row].displayName === r).toString();\n      return (_computedRows$r$c = computedRows === null || computedRows === void 0 ? void 0 : (_computedRows$r = computedRows[r]) === null || _computedRows$r === void 0 ? void 0 : _computedRows$r[c]) !== null && _computedRows$r$c !== void 0 ? _computedRows$r$c : computeCell(r, c, rawRows, computedRows);\n    }))) !== null && _eval !== void 0 ? _eval : 0\n  };\n  return computedRows[row][column];\n};\nexport const col = data => {\n  var _data$headers;\n  const computedRows = {};\n  const rows = Object.keys(data.data).map(row => {\n    const {\n      index,\n      ...rest\n    } = data.data[row];\n    return {\n      ...rest\n    };\n  });\n  return data === null || data === void 0 ? void 0 : (_data$headers = data.headers) === null || _data$headers === void 0 ? void 0 : _data$headers.map(e => {\n    return {\n      accessorFn: row => {\n        if (e !== \"item\") return computeCell(row.index, e, rows, computedRows).toFixed(2);\n        return row[e];\n      },\n      accessorKey: e,\n      ...(e === \"item\" && {\n        cell: _ref => {\n          let {\n            row,\n            getValue\n          } = _ref;\n          return /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              paddingLeft: `${row.depth * 2}rem`\n            },\n            children: /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [row.getCanExpand() ? /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: row.getToggleExpandedHandler(),\n                style: {\n                  cursor: 'pointer'\n                },\n                children: row.getIsExpanded() ? '^' : '>'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 68,\n                columnNumber: 19\n              }, this) : '', ' ', getValue()]\n            }, void 0, true)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 61,\n            columnNumber: 13\n          }, this);\n        }\n      }),\n      header: () => e.toUpperCase(),\n      footer: props => props.column.id\n    };\n  });\n};\nexport function transformData(data, jsonData) {\n  const output = [];\n  for (const key in jsonData.root) {\n    const item = jsonData.data[key];\n    const subRows = transformSubRows(data, jsonData.root[key]);\n    output.push({\n      [item.displayName]: {\n        ...item,\n        subRows\n      }\n    });\n  }\n  return output;\n}\nfunction transformSubRows(data, subRowsData) {\n  const subRows = [];\n  for (const key in subRowsData) {\n    const item = data[key];\n    const subRowData = item ? transformSubRows(data, subRowsData[key]) : undefined;\n    subRows.push({\n      ...item,\n      subRows: subRowData.length ? subRowData : undefined\n    });\n  }\n  return subRows;\n}\n\n// const result = transformData(dummyData.rows, dummyData);\n// export const dee = result.reduce((acc, val)=>{\n//   Object.keys(val).forEach(e=>{\n//       acc.push(val[e])\n//   })\n//   return acc\n// }, [])\n// console.log(dee);","map":{"version":3,"names":["dummyData","headers","data","expense","item","loss","salary","income","fixedDeposit","root","computeCell","row","column","rawRows","computedRows","_eval","eval","replace","_","r","c","_computedRows$r$c","_computedRows$r","Object","keys","find","displayName","toString","col","_data$headers","rows","map","index","rest","e","accessorFn","toFixed","accessorKey","cell","_ref","getValue","_jsxDEV","style","paddingLeft","depth","children","_Fragment","getCanExpand","onClick","getToggleExpandedHandler","cursor","getIsExpanded","fileName","_jsxFileName","lineNumber","columnNumber","header","toUpperCase","footer","props","id","transformData","jsonData","output","key","subRows","transformSubRows","push","subRowsData","subRowData","undefined","length"],"sources":["/home/ubuntu/Downloads/spreadsheet-app/src/Spreadsheet/data.js"],"sourcesContent":["\nconst dummyData = {\n    headers: [\"item\", \"jan-2023\", \"feb-2023\", \"mar-2023\", \"total\"],\n    data: {\n      expense: { item: \"expense\", \"jan-2023\": 5, \"feb-2023\": 21, \"mar-2023\": 35, \"total\": \"=(((B10)+(B11))+(B12))+(B13)\" },\n      loss: { item: \"loss\", \"jan-2023\": 50, \"feb-2023\": 20, \"mar-2023\": 47, \"total\": \"=(((B10)+(B11))+(B12))+(B13)\" },\n      salary: { item: \"salary\", \"jan-2023\": 511, \"feb-2023\": 23, \"mar-2023\": 49, \"total\": \"=(((B10)+(B11))+(B12))+(B13)\" },\n      income: { item: \"income\", \"jan-2023\": 59, \"feb-2023\": 25, \"mar-2023\": 45, \"total\": \"=(((B10)+(B11))+(B12))+(B13)\" },\n      fixedDeposit: { item: \"fixedDeposit\", \"jan-2023\": 59, \"feb-2023\": 25, \"mar-2023\": 45, \"total\": \"=(((B10)+(B11))+(B12))+(B13)\" }\n    },\n    root: {\n      expense: {\n        loss: {}\n      },\n      salary: {\n        income: {\n            fixedDeposit: {\n                expense:{\n                    loss:{}\n                }\n            }\n        } ,\n         \n    }\n    }\n  };\n\nconst computeCell = (row, column, rawRows, computedRows) => {\n  computedRows[row] = {\n    ...computedRows[row],\n    [column]:\n      eval(\n        rawRows[row][column].replace(\n          /'(.+?)'&'(.+?)'/g,\n          (_, r, c) => {\n            r = Object.keys(rawRows).find(row => rawRows[row].displayName === r).toString();\n            return computedRows?.[r]?.[c] ?? computeCell(r, c, rawRows, computedRows)\n        })\n      ) ?? 0,\n  };\n  return computedRows[row][column];\n};\n\nexport const col = (data) => {\n  const computedRows = {};\n  const rows = Object.keys(data.data).map(row => {\n    const { index, ...rest } = data.data[row]\n    return { ...rest }\n  })\n\n  return data?.headers?.map(e => {\n    return {\n        accessorFn: row => {\n          if (e !== \"item\")\n            return (computeCell(row.index, e, rows, computedRows)).toFixed(2)\n          return row[e];\n        },\n        accessorKey: e,\n        ...(e===\"item\" && {cell: ({ row, getValue }) => {\n            return (\n            <div\n              style={{\n                paddingLeft: `${row.depth * 2}rem`,\n              }}\n            >\n              <>\n                {row.getCanExpand() ? (\n                  <button\n                    {...{\n                      onClick: row.getToggleExpandedHandler(),\n                      style: { cursor: 'pointer' },\n                    }}\n                  >\n                    {row.getIsExpanded() ? '^' : '>'}\n                  </button>\n                ) : (\n                  ''\n                )}{' '}\n                {getValue()}\n              </>\n            </div>\n          )}}),\n        header: () => e.toUpperCase(),\n        footer: (props) => props.column.id,\n    }\n  })\n}\n\n  export function transformData(data, jsonData) {\n    const output = [];\n    for (const key in jsonData.root) {\n      const item = jsonData.data[key];\n      const subRows = transformSubRows(data, jsonData.root[key]);\n\n      output.push({\n        [item.displayName]: { ...item, subRows }\n      });\n    }\n    return output;\n  }\n  \n  function transformSubRows(data, subRowsData) {\n    const subRows = [];  \n      for (const key in subRowsData) {\n        const item = data[key];\n        const subRowData = item ? transformSubRows(data, subRowsData[key]) : undefined;\n        subRows.push(\n           { ...item, subRows: subRowData.length ? subRowData :undefined }\n        );\n      }\n    return subRows;\n  }\n  \n  // const result = transformData(dummyData.rows, dummyData);\n  // export const dee = result.reduce((acc, val)=>{\n  //   Object.keys(val).forEach(e=>{\n  //       acc.push(val[e])\n  //   })\n  //   return acc\n  // }, [])\n  // console.log(dee);\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}